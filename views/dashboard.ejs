<%- include('./partials/header') %>

  <div class="container mt-4">
    <h3 class="mb-4">Recent Attendance</h3>

    <div class="dropdown mb-2">
      <button class="btn btn-primary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
        Filter: <%= filter.charAt(0).toUpperCase() + filter.slice(1) %>
      </button>
      <ul class="dropdown-menu">
        <li>
          <a class="dropdown-item" href="/dashboard?filter=all">View All Attendance</a>
        </li>
        <li>
          <a class="dropdown-item" href="/dashboard?filter=today">Todayâ€™s Attendance</a>
        </li>
        <li>
          <a class="dropdown-item" href="/dashboard?filter=month">This Month</a>
        </li>
      </ul>
    </div>

    <table class="table table-hover table-bordered table-striped text-center">
      <thead class="table-dark">
        <tr>
          <th>Student Name</th>
          <th>Roll No</th>
          <th>Date</th>
          <th>Time</th>
        </tr>
      </thead>
      <tbody>
        <% if (records.length> 0) { %>
          <% records.forEach(record=> { %>
            <tr>
              <td>
                <%= record.student ? record.student.name : "Unknown" %>
              </td>
              <td>
                <%= record.student ? record.student.rollNo : "N/A" %>
              </td>
              <td>
                <%= record.date.toLocaleDateString() %>
              </td>
              <td>
                <%= record.date.toLocaleTimeString() %>
              </td>
            </tr>
            <% }) %>
              <% } else { %>
                <tr>
                  <td colspan="4" class="text-center">No attendance records found.</td>
                </tr>
                <% } %>
      </tbody>
    </table>

    <%- include('./partials/pagination') %>

  </div>

  <%- include('./partials/footer') %>